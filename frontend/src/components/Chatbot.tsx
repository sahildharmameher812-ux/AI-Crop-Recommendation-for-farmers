import React, { useState, useRef, useEffect } from 'react'
import { motion } from 'framer-motion'
import {
  PaperAirplaneIcon,
  XMarkIcon,
  SparklesIcon,
  UserIcon,
  ComputerDesktopIcon,
  MicrophoneIcon,
  PhotoIcon
} from '@heroicons/react/24/outline'
import { toast } from 'react-hot-toast'

interface ChatMessage {
  id: string
  type: 'user' | 'bot'
  message: string
  timestamp: Date
  isLoading?: boolean
}

interface ChatbotProps {
  isOpen: boolean
  onToggle: () => void
}

const Chatbot: React.FC<ChatbotProps> = ({ isOpen, onToggle }) => {
  const [messages, setMessages] = useState<ChatMessage[]>([
    {
      id: '1',
      type: 'bot',
      message: `üåæ **Namaste! I'm CropAI Assistant**

Welcome to your personal agricultural expert! I can help you with:

‚Ä¢ **Crop Recommendations** - Best crops for your soil and season
‚Ä¢ **Disease Identification** - Plant disease diagnosis and treatment
‚Ä¢ **Weather Insights** - Agricultural weather forecasts
‚Ä¢ **Market Prices** - Current crop prices and selling advice
‚Ä¢ **Farming Techniques** - Modern farming practices
‚Ä¢ **Soil Management** - Soil health and fertilizer guidance
‚Ä¢ **Pest Control** - Organic and chemical pest solutions
‚Ä¢ **Government Schemes** - Agricultural subsidies and programs

Ask me anything about farming in Jharkhand! üå±`,
      timestamp: new Date()
    }
  ])
  
  const [inputValue, setInputValue] = useState('')
  const [isTyping, setIsTyping] = useState(false)
  const messagesEndRef = useRef<HTMLDivElement>(null)
  const inputRef = useRef<HTMLInputElement>(null)

  // Sample intelligent responses for agricultural queries
  const getSmartResponse = (query: string): string => {
    const lowerQuery = query.toLowerCase()
    
    // Crop recommendation queries
    if (lowerQuery.includes('crop') && (lowerQuery.includes('recommend') || lowerQuery.includes('suggest') || lowerQuery.includes('best'))) {
      return `üåæ **Smart Crop Recommendations for Jharkhand:**

**For Current Season (Kharif):**
‚Ä¢ **Rice (Paddy)** - High demand, government MSP support
‚Ä¢ **Maize** - Good market price, drought tolerant  
‚Ä¢ **Sugarcane** - Long-term investment, stable returns
‚Ä¢ **Vegetables** - Quick returns, local market demand

**Key Factors to Consider:**
‚Ä¢ **Soil Type** - Clay soil best for rice, loamy for vegetables
‚Ä¢ **Water Availability** - Rice needs more water than maize
‚Ä¢ **Market Distance** - Perishable crops need nearby markets
‚Ä¢ **Investment Capacity** - Rice requires higher initial investment

**Pro Tips:**
‚Ä¢ Check soil pH before selecting crops
‚Ä¢ Consider crop rotation for soil health
‚Ä¢ Mix cash crops with food crops for stability

Would you like specific recommendations based on your location and soil type?`
    }

    // Disease-related queries
    if (lowerQuery.includes('disease') || lowerQuery.includes('pest') || lowerQuery.includes('fungus') || lowerQuery.includes('insect')) {
      return `üî¨ **Plant Disease & Pest Management Guide:**

**Common Diseases in Jharkhand:**
‚Ä¢ **Blast Disease (Rice)** - Brown spots on leaves, affects yield
‚Ä¢ **Late Blight (Potato/Tomato)** - Dark patches, spreads quickly
‚Ä¢ **Stem Rot** - Affects multiple crops, caused by excess moisture
‚Ä¢ **Leaf Curl** - Viral infection, transmitted by whiteflies

**Immediate Actions:**
‚Ä¢ **Isolate** affected plants immediately
‚Ä¢ **Remove** infected leaves and destroy them
‚Ä¢ **Improve** air circulation around plants
‚Ä¢ **Avoid** overhead watering

**Treatment Options:**
‚Ä¢ **Organic**: Neem oil, copper sulfate, bio-fungicides
‚Ä¢ **Chemical**: Mancozeb, Carbendazim (as per expert advice)
‚Ä¢ **Preventive**: Bordeaux mixture spray

**Long-term Prevention:**
‚Ä¢ Use resistant crop varieties
‚Ä¢ Proper crop rotation
‚Ä¢ Maintain field hygiene
‚Ä¢ Regular monitoring

Upload a photo of affected plants for specific diagnosis!`
    }

    // Weather-related queries
    if (lowerQuery.includes('weather') || lowerQuery.includes('rain') || lowerQuery.includes('temperature') || lowerQuery.includes('climate')) {
      return `üå§Ô∏è **Agricultural Weather Insights for Jharkhand:**

**Current Weather Impact:**
‚Ä¢ **Monsoon Season** - Good for Kharif crops like rice, maize
‚Ä¢ **Temperature Range** - 25-35¬∞C suitable for most crops
‚Ä¢ **Humidity Levels** - High humidity increases disease risk
‚Ä¢ **Rainfall Pattern** - Monitor for flooding or drought stress

**Farming Activities by Weather:**
‚Ä¢ **Sunny Days** - Perfect for spraying pesticides, harvesting
‚Ä¢ **Rainy Days** - Avoid field operations, check drainage
‚Ä¢ **Cloudy Weather** - Good for transplanting seedlings
‚Ä¢ **Windy Conditions** - Be cautious with chemical sprays

**Weather-Based Recommendations:**
‚Ä¢ **Heavy Rain Alert** - Ensure proper field drainage
‚Ä¢ **Dry Spell** - Increase irrigation frequency
‚Ä¢ **Storm Warning** - Support tall crops, harvest if ready
‚Ä¢ **Hail Risk** - Use protective covers for sensitive crops

**Smart Tips:**
‚Ä¢ Check weather forecast daily
‚Ä¢ Plan operations 3-4 days ahead
‚Ä¢ Keep emergency supplies ready
‚Ä¢ Use weather apps for accurate forecasts

Check our Weather section for 5-day detailed forecasts!`
    }

    // Market price queries
    if (lowerQuery.includes('price') || lowerQuery.includes('market') || lowerQuery.includes('sell') || lowerQuery.includes('profit')) {
      return `üìà **Market Intelligence & Pricing Insights:**

**Current Market Trends (Jharkhand):**
‚Ä¢ **Rice** - ‚Çπ2,850/quintal (‚Üë 4.8% from last week)
‚Ä¢ **Wheat** - ‚Çπ2,340/quintal (‚Üì 1.7% from last week)
‚Ä¢ **Maize** - ‚Çπ2,180/quintal (‚Üë 1.4% from last week)
‚Ä¢ **Potato** - ‚Çπ1,580/quintal (‚Üì 8.1% due to supply increase)

**Best Selling Strategies:**
‚Ä¢ **Rice** - Sell within next 2 weeks, prices at seasonal high
‚Ä¢ **Vegetables** - Sell immediately, monsoon affecting transport
‚Ä¢ **Grains** - Hold for 3-4 weeks, prices expected to rise
‚Ä¢ **Cash Crops** - Check futures market for timing

**Factors Affecting Prices:**
‚Ä¢ **Festival Season** - Increases demand for rice, wheat
‚Ä¢ **Transport Issues** - Affects perishable crop prices
‚Ä¢ **Government Policies** - MSP announcements impact decisions
‚Ä¢ **Export Demand** - International markets influence prices

**Maximizing Profits:**
‚Ä¢ Grade your produce properly
‚Ä¢ Use proper storage techniques
‚Ä¢ Sell directly to eliminate middlemen
‚Ä¢ Form farmer groups for better rates

Visit our Market Data section for real-time prices!`
    }

    // Soil-related queries
    if (lowerQuery.includes('soil') || lowerQuery.includes('fertilizer') || lowerQuery.includes('nutrient') || lowerQuery.includes('ph')) {
      return `üå± **Soil Health & Nutrient Management:**

**Soil Types in Jharkhand:**
‚Ä¢ **Red Soil** - Good for rice, needs organic matter
‚Ä¢ **Black Soil** - Excellent for cotton, wheat, sugarcane
‚Ä¢ **Laterite Soil** - Suitable for cashew, coconut with amendments
‚Ä¢ **Alluvial Soil** - Best for vegetables, highly fertile

**Essential Soil Tests:**
‚Ä¢ **pH Level** - Ideal range 6.0-7.5 for most crops
‚Ä¢ **Nitrogen (N)** - For leaf growth and green color
‚Ä¢ **Phosphorus (P)** - For root development and flowering  
‚Ä¢ **Potassium (K)** - For disease resistance and fruit quality

**Natural Soil Improvement:**
‚Ä¢ **Compost** - Add 2-3 tons per acre annually
‚Ä¢ **Green Manuring** - Grow legumes and incorporate
‚Ä¢ **Crop Rotation** - Alternate between different crop families
‚Ä¢ **Cover Crops** - Prevent soil erosion during off-season

**Fertilizer Recommendations:**
‚Ä¢ **Organic**: FYM, compost, vermicompost
‚Ä¢ **Bio-fertilizers**: Rhizobium, PSB, Azotobacter
‚Ä¢ **Chemical**: NPK based on soil test reports
‚Ä¢ **Micro-nutrients**: Zinc, Iron, Boron as needed

Get your soil tested every 2-3 years for optimal results!`
    }

    // Government schemes queries
    if (lowerQuery.includes('scheme') || lowerQuery.includes('subsidy') || lowerQuery.includes('government') || lowerQuery.includes('loan')) {
      return `üèõÔ∏è **Government Schemes for Jharkhand Farmers:**

**Central Government Schemes:**
‚Ä¢ **PM-KISAN** - ‚Çπ6,000 per year direct cash transfer
‚Ä¢ **Crop Insurance** - Pradhan Mantri Fasal Bima Yojana
‚Ä¢ **Soil Health Card** - Free soil testing and recommendations
‚Ä¢ **KCC (Kisan Credit Card)** - Easy agricultural loans

**Jharkhand State Schemes:**
‚Ä¢ **Birsa Kisan Yojana** - Financial assistance for farming
‚Ä¢ **Mukhyamantri Krishi Ashirwad Yojana** - Input subsidies
‚Ä¢ **Organic Farming Promotion** - Certification support
‚Ä¢ **Water Conservation** - Drip irrigation subsidies

**How to Apply:**
‚Ä¢ **Online Portal** - jharkhand.gov.in
‚Ä¢ **Common Service Centers** - Visit nearest CSC
‚Ä¢ **Agricultural Department** - Block office applications
‚Ä¢ **Bank Branches** - For loan-related schemes

**Required Documents:**
‚Ä¢ Aadhaar Card and linking
‚Ä¢ Land documents (Khasra/Khatauni)
‚Ä¢ Bank account details
‚Ä¢ Caste certificate (if applicable)

**Application Status:**
‚Ä¢ Track applications online
‚Ä¢ SMS updates on mobile
‚Ä¢ Visit concerned office for queries

Need help with specific scheme applications? Ask me!`
    }

    // Organic farming queries
    if (lowerQuery.includes('organic') || lowerQuery.includes('natural') || lowerQuery.includes('chemical free')) {
      return `üåø **Organic Farming Guide for Jharkhand:**

**Benefits of Organic Farming:**
‚Ä¢ **Health** - No harmful chemical residues
‚Ä¢ **Environment** - Protects soil and water quality
‚Ä¢ **Economics** - Premium prices (20-30% higher)
‚Ä¢ **Sustainability** - Long-term soil fertility

**Organic Inputs Available:**
‚Ä¢ **FYM (Farmyard Manure)** - Base fertilizer, 10-15 tons/acre
‚Ä¢ **Vermicompost** - Rich in nutrients, 2-3 tons/acre
‚Ä¢ **Bio-fertilizers** - Nitrogen fixation, phosphorus mobilization
‚Ä¢ **Neem Products** - Natural pest control, disease prevention

**Organic Pest Management:**
‚Ä¢ **Neem Oil** - Effective against aphids, thrips
‚Ä¢ **Bacillus thuringiensis** - Biological control for caterpillars
‚Ä¢ **Sticky Traps** - Yellow/blue traps for flying insects
‚Ä¢ **Companion Planting** - Marigold, mint for natural repelling

**Certification Process:**
‚Ä¢ **Inspection** - Field verification by certified agency
‚Ä¢ **Documentation** - Maintain detailed records
‚Ä¢ **Transition Period** - 3 years for full organic status
‚Ä¢ **Cost** - ‚Çπ15,000-25,000 for certification

**Market Linkages:**
‚Ä¢ Organic stores and supermarkets
‚Ä¢ Online platforms (Amazon, Flipkart)
‚Ä¢ Export opportunities
‚Ä¢ Direct consumer sales

Start with small area and gradually expand your organic farming!`
    }

    // Water management queries  
    if (lowerQuery.includes('water') || lowerQuery.includes('irrigation') || lowerQuery.includes('drought') || lowerQuery.includes('drip')) {
      return `üíß **Smart Water Management for Agriculture:**

**Efficient Irrigation Methods:**
‚Ä¢ **Drip Irrigation** - 40-50% water saving, uniform distribution
‚Ä¢ **Sprinkler System** - Good for field crops, 20-30% water saving
‚Ä¢ **Micro-sprinklers** - Perfect for fruit trees and vegetables
‚Ä¢ **Furrow Irrigation** - Traditional but effective for row crops

**Water Conservation Techniques:**
‚Ä¢ **Mulching** - Reduces evaporation by 50-70%
‚Ä¢ **Rainwater Harvesting** - Collect and store monsoon water
‚Ä¢ **Check Dams** - Control water flow, increase groundwater
‚Ä¢ **Contour Farming** - Prevents water runoff on slopes

**Drought Management:**
‚Ä¢ **Drought-tolerant Varieties** - Choose crops that need less water
‚Ä¢ **Deficit Irrigation** - Apply less water at non-critical stages
‚Ä¢ **Crop Selection** - Prefer millets over rice during dry years
‚Ä¢ **Soil Moisture Conservation** - Deep plowing, organic matter addition

**Government Support:**
‚Ä¢ **Subsidy on Drip/Sprinkler** - 50-90% subsidy available
‚Ä¢ **Bore Well Subsidy** - Financial assistance for water sources
‚Ä¢ **Pond Construction** - Support for farm ponds
‚Ä¢ **Training Programs** - Free workshops on water management

**Water Quality Testing:**
‚Ä¢ Check pH (6.5-8.5 ideal)
‚Ä¢ Test for salinity and minerals
‚Ä¢ Avoid contaminated water sources
‚Ä¢ Regular cleaning of water systems

Smart water use = Higher yields + Lower costs!`
    }

    // General farming queries
    if (lowerQuery.includes('farming') || lowerQuery.includes('agriculture') || lowerQuery.includes('crop') || lowerQuery.includes('help')) {
      return `üöú **Complete Farming Guide for Jharkhand:**

**Getting Started:**
‚Ä¢ **Land Preparation** - Deep plowing, leveling, organic matter addition
‚Ä¢ **Seed Selection** - Use certified seeds from authorized dealers
‚Ä¢ **Timing** - Follow agricultural calendar for your region
‚Ä¢ **Investment Planning** - Budget for inputs, labor, equipment

**Modern Farming Techniques:**
‚Ä¢ **Precision Agriculture** - GPS-guided farming, variable rate application
‚Ä¢ **Protected Cultivation** - Polyhouse, shade net farming
‚Ä¢ **Mechanization** - Tractors, harvesters, seeders for efficiency
‚Ä¢ **Digital Tools** - Weather apps, market price apps, expert consultation

**Seasonal Activities:**
‚Ä¢ **Kharif Season** (Jun-Oct) - Rice, maize, sugarcane, vegetables
‚Ä¢ **Rabi Season** (Nov-Apr) - Wheat, mustard, gram, peas
‚Ä¢ **Zaid Season** (Apr-Jun) - Fodder crops, summer vegetables

**Success Factors:**
‚Ä¢ **Knowledge** - Stay updated with latest techniques
‚Ä¢ **Quality Inputs** - Invest in good seeds, fertilizers
‚Ä¢ **Timely Operations** - Follow critical timing for operations
‚Ä¢ **Market Intelligence** - Know when and where to sell

**Common Mistakes to Avoid:**
‚Ä¢ Over-use of chemicals
‚Ä¢ Ignoring soil health
‚Ä¢ Poor water management
‚Ä¢ Lack of proper storage

**Support Systems:**
‚Ä¢ Agricultural extension officers
‚Ä¢ Krishi Vigyan Kendras (KVKs)
‚Ä¢ Farmer Producer Organizations (FPOs)
‚Ä¢ Online resources and apps

Remember: Successful farming = Right crop + Right time + Right technique!`
    }

    // Default intelligent response
    return `ü§ñ **I understand you're asking about "${query}"**

I'm here to help with all your agricultural questions! Here are some topics I can assist you with:

**üåæ Crop Management:**
‚Ä¢ Best crop selection for your area
‚Ä¢ Seasonal farming calendar
‚Ä¢ Crop rotation strategies

**üî¨ Plant Health:**
‚Ä¢ Disease identification and treatment
‚Ä¢ Pest control methods
‚Ä¢ Preventive care tips

**üíß Resource Management:**
‚Ä¢ Irrigation and water conservation
‚Ä¢ Soil health improvement
‚Ä¢ Fertilizer recommendations

**üìà Business Intelligence:**
‚Ä¢ Market prices and trends
‚Ä¢ Best selling strategies
‚Ä¢ Profit maximization tips

**üèõÔ∏è Government Support:**
‚Ä¢ Available schemes and subsidies
‚Ä¢ Application procedures
‚Ä¢ Required documentation

**Could you please be more specific about what you'd like to know?** For example:
- "What crops should I grow in monsoon?"
- "How to treat rice blast disease?"
- "What's the current price of wheat?"
- "Which government schemes can I apply for?"

I'm here to provide detailed, actionable advice! üå±`
  }

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
  }

  useEffect(() => {
    scrollToBottom()
  }, [messages])

  useEffect(() => {
    if (isOpen && inputRef.current) {
      inputRef.current.focus()
    }
  }, [isOpen])

  const handleSendMessage = async () => {
    if (!inputValue.trim()) return

    const userMessage: ChatMessage = {
      id: Date.now().toString(),
      type: 'user',
      message: inputValue.trim(),
      timestamp: new Date()
    }

    setMessages(prev => [...prev, userMessage])
    setInputValue('')
    setIsTyping(true)

    // Simulate API call to backend
    try {
      // Simulate processing delay
      await new Promise(resolve => setTimeout(resolve, 1500))
      
      const botResponse: ChatMessage = {
        id: (Date.now() + 1).toString(),
        type: 'bot',
        message: getSmartResponse(userMessage.message),
        timestamp: new Date()
      }

      setMessages(prev => [...prev, botResponse])
    } catch (error) {
      toast.error('Sorry, I encountered an error. Please try again.')
    } finally {
      setIsTyping(false)
    }
  }

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault()
      handleSendMessage()
    }
  }

  const quickQuestions = [
    "What crops should I grow this season?",
    "How to identify plant diseases?",
    "Current market prices?",
    "Government schemes for farmers?",
    "Organic farming tips?"
  ]

  const formatMessage = (message: string) => {
    // Convert markdown-style formatting to HTML
    let formatted = message
      .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
      .replace(/\*(.*?)\*/g, '<em>$1</em>')
      .replace(/\n/g, '<br/>')
    
    return { __html: formatted }
  }

  if (!isOpen) return null

  return (
    <motion.div
      initial={{ opacity: 0, scale: 0.8, y: 50 }}
      animate={{ opacity: 1, scale: 1, y: 0 }}
      exit={{ opacity: 0, scale: 0.8, y: 50 }}
      transition={{ duration: 0.3 }}
      className="fixed bottom-4 right-4 w-96 h-[600px] bg-white rounded-2xl shadow-2xl border border-green-200 z-50 flex flex-col overflow-hidden"
    >
      {/* Header */}
      <div className="bg-gradient-to-r from-green-600 to-emerald-600 p-4 flex items-center justify-between">
        <div className="flex items-center space-x-3">
          <div className="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <SparklesIcon className="w-6 h-6 text-white" />
          </div>
          <div>
            <h3 className="text-white font-bold">CropAI Assistant</h3>
            <p className="text-green-100 text-sm">Agricultural Expert</p>
          </div>
        </div>
        <button
          onClick={onToggle}
          className="text-white hover:bg-white/20 p-2 rounded-full transition-colors"
        >
          <XMarkIcon className="w-5 h-5" />
        </button>
      </div>

      {/* Messages */}
      <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
        {messages.map((message) => (
          <motion.div
            key={message.id}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.3 }}
            className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}
          >
            <div className={`max-w-[85%] ${message.type === 'user' ? 'bg-green-600 text-white' : 'bg-white border border-gray-200'} rounded-2xl p-3 shadow-sm`}>
              <div className="flex items-start space-x-2">
                {message.type === 'bot' && (
                  <div className="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                    <ComputerDesktopIcon className="w-4 h-4 text-green-600" />
                  </div>
                )}
                <div className="flex-1">
                  <div 
                    className={`text-sm leading-relaxed ${message.type === 'user' ? 'text-white' : 'text-gray-800'}`}
                    dangerouslySetInnerHTML={formatMessage(message.message)}
                  />
                  <div className={`text-xs mt-2 ${message.type === 'user' ? 'text-green-100' : 'text-gray-500'}`}>
                    {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                  </div>
                </div>
                {message.type === 'user' && (
                  <div className="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                    <UserIcon className="w-4 h-4 text-white" />
                  </div>
                )}
              </div>
            </div>
          </motion.div>
        ))}
        
        {isTyping && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="flex justify-start"
          >
            <div className="bg-white border border-gray-200 rounded-2xl p-3 shadow-sm">
              <div className="flex items-center space-x-2">
                <div className="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                  <ComputerDesktopIcon className="w-4 h-4 text-green-600" />
                </div>
                <div className="flex space-x-1">
                  <div className="w-2 h-2 bg-green-400 rounded-full animate-bounce"></div>
                  <div className="w-2 h-2 bg-green-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                  <div className="w-2 h-2 bg-green-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                </div>
              </div>
            </div>
          </motion.div>
        )}
        <div ref={messagesEndRef} />
      </div>

      {/* Quick Questions */}
      {messages.length === 1 && (
        <div className="p-3 border-t border-gray-200 bg-white">
          <p className="text-xs text-gray-600 mb-2">Quick Questions:</p>
          <div className="flex flex-wrap gap-1">
            {quickQuestions.map((question, index) => (
              <button
                key={index}
                onClick={() => setInputValue(question)}
                className="text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded-full transition-colors"
              >
                {question}
              </button>
            ))}
          </div>
        </div>
      )}

      {/* Input */}
      <div className="p-4 border-t border-gray-200 bg-white">
        <div className="flex items-center space-x-2">
          <div className="flex-1 relative">
            <input
              ref={inputRef}
              type="text"
              value={inputValue}
              onChange={(e) => setInputValue(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Ask me about farming, crops, diseases..."
              className="w-full px-4 py-2 pr-20 border border-gray-300 rounded-xl focus:outline-none focus:border-green-500 text-sm"
              disabled={isTyping}
            />
            <div className="absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1">
              <button className="p-1 text-gray-400 hover:text-green-600 transition-colors">
                <MicrophoneIcon className="w-4 h-4" />
              </button>
              <button className="p-1 text-gray-400 hover:text-green-600 transition-colors">
                <PhotoIcon className="w-4 h-4" />
              </button>
            </div>
          </div>
          <button
            onClick={handleSendMessage}
            disabled={!inputValue.trim() || isTyping}
            className={`p-2 rounded-xl transition-colors ${
              inputValue.trim() && !isTyping
                ? 'bg-green-600 hover:bg-green-700 text-white'
                : 'bg-gray-100 text-gray-400 cursor-not-allowed'
            }`}
          >
            <PaperAirplaneIcon className="w-4 h-4" />
          </button>
        </div>
      </div>
    </motion.div>
  )
}

export default Chatbot